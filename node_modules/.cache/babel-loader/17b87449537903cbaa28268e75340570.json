{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\Emman\\\\Documents\\\\ME4\\\\FYP\\\\FinalDash\\\\shards-dashboard-react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Users\\\\Emman\\\\Documents\\\\ME4\\\\FYP\\\\FinalDash\\\\shards-dashboard-react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Emman\\\\Documents\\\\ME4\\\\FYP\\\\FinalDash\\\\shards-dashboard-react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Emman\\\\Documents\\\\ME4\\\\FYP\\\\FinalDash\\\\shards-dashboard-react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Emman\\\\Documents\\\\ME4\\\\FYP\\\\FinalDash\\\\shards-dashboard-react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Emman\\\\Documents\\\\ME4\\\\FYP\\\\FinalDash\\\\shards-dashboard-react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\Emman\\\\Documents\\\\ME4\\\\FYP\\\\FinalDash\\\\shards-dashboard-react\\\\src\\\\components\\\\2020Graphs\\\\BottomHalfPercent.js\";\nimport React from 'react';\nimport Chart from \"../../utils/chart\";\nimport * as d3 from \"d3\";\nvar data = [];\nd3.csv(\"https://graphtest123.s3.eu-west-2.amazonaws.com/FMX2_Gradebook_2020_21_03_26_Mobius_Plus_PT_anonymous%2B-AWSupload.csv\") // request csv file\n.then(makeChart); // converts into an array then call makeChart() function\n// calls function to make a chart after it has been converted into an array\n\nfunction makeChart(students) {\n  // takes in an array of students\n  var progressScores = [];\n  var dictSheet = {\n    Sheet5: [],\n    Sheet4: [],\n    Sheet3: [],\n    Sheet2: [],\n    Sheet1: [],\n    Sheet8: [],\n    Sheet7: [],\n    Sheet6: [],\n    Sheet12: [],\n    Sheet11: [],\n    Sheet10: [],\n    Sheet9: [],\n    Sheet17: [],\n    Sheet16: [],\n    Sheet15: [],\n    Sheet14: [],\n    Sheet13: []\n  };\n  var LectureDate = [28, 21, 14, 7, 0, 49, 42, 35, 77, 70, 63, 56, 112, 105, 98, 91, 84]; //make an array of lecture start dates\n\n  var dictPercentile = {\n    P5: [],\n    P4: [],\n    P3: [],\n    P2: [],\n    P1: [],\n    P8: [],\n    P7: [],\n    P6: [],\n    P12: [],\n    P11: [],\n    P10: [],\n    P9: [],\n    P17: [],\n    P16: [],\n    P15: [],\n    P14: [],\n    P13: []\n  };\n  var PercentAvgSheet1to8 = [];\n  var DaysAfterLectMeanSheet1to8 = [];\n  var Sheet1to8SD = [];\n  var Percentile1to8SD = []; // for loop to check and calculate the days after lecture when students started tutorial sheet\n\n  for (var i = 0; i < students.length; i++) {\n    var count = -1;\n    var LectureCount = 0;\n    var progressKey = Object.keys(students[i])[97];\n    var progressScoremaybe = students[i][progressKey];\n    progressScores.push(parseFloat(progressScoremaybe / 40 * 100));\n\n    for (var j = 8; j <= 90; j += 5) {\n      var key = Object.keys(students[i])[j]; // access title of start times\n\n      var value = students[i][key]; // gives date in raw form\n      // console.log(\"Raw form date\" + \" \" + value)\n      //convert date string into a time object\n\n      var date = new Date(value); // console.log(\"date\" + \" \" + date)\n\n      var DayNumber = dayOfYear(date); // console.log(\"day number is\" + \" \" + DayNumber)\n      //need to account for imperial calendar with 3rd october as week 1\n\n      if (value !== 0) {\n        count++;\n      } else {\n        continue;\n      }\n\n      if (value === \"\") {\n        DayNumber = 154;\n      } else if (dayOfYear(date) >= 286 || dayOfYear(date) < 11) {\n        DayNumber -= 286;\n      } else if (dayOfYear(date) < 46 || dayOfYear(date) >= 11) {\n        DayNumber += 52;\n      } else {\n        DayNumber += 45;\n      }\n\n      key = Object.keys(dictSheet)[count]; //accesses tutorial sheet dictionary\n\n      dictSheet[key][i] = Math.abs(DayNumber - LectureDate[LectureCount]);\n      LectureCount++;\n    }\n  }\n\n  ; //create percentiles\n\n  for (var i = 0; i < Object.keys(dictPercentile).length; i++) {\n    key = Object.keys(dictPercentile)[i]; //accesses tutorial sheet dictionary\n\n    var key2 = Object.keys(dictSheet)[i]; //accesses tutorial sheet dictionary\n\n    for (var j = 0; j <= students.length; j++) {\n      count = 0;\n\n      for (var z = 0; z <= students.length; z++) {\n        if (dictSheet[key2][z] >= dictSheet[key2][j]) {\n          count++;\n        }\n      }\n\n      dictPercentile[key][j] = count / students.length * 100;\n    }\n  }\n\n  ; // working out Mean of sheet time after exam, standard deviation of sheet time after exam, Mean of percentiles, \n\n  for (var i = 0; i < Object.keys(dictPercentile).length; i++) {\n    key = Object.keys(dictPercentile)[i]; //accesses tutorial sheet dictionary\n\n    key2 = Object.keys(dictSheet)[i]; //accesses tutorial sheet dictionary\n\n    for (var j = 0; j <= students.length; j++) {\n      count = 0;\n\n      for (var z = 0; z <= students.length; z++) {\n        if (dictSheet[key2][z] >= dictSheet[key2][j]) {\n          count++;\n        }\n      }\n\n      dictPercentile[key][j] = count / students.length * 100;\n    }\n  }\n\n  ;\n  var dictSheetArray = [];\n  var dictPercentileArray = []; // console.log(Object.values(dictPercentile.P1))\n  // for all sheets use: Object.keys(dictSheet).length instead of 8\n\n  for (var i = 0; i < 8; i++) {\n    dictSheetArray.push(dictSheet[Object.keys(dictSheet)[i]]);\n    dictPercentileArray.push(dictPercentile[Object.keys(dictPercentile)[i]]);\n  }\n\n  console.log(dictSheetArray); //Calculating mean of sheets, mean of percentiles, SD of sheets\n\n  var dictSheetTranspose = dictSheetArray[0].map(function (_, colIndex) {\n    return dictSheetArray.map(function (row) {\n      return row[colIndex];\n    });\n  });\n  var dictPercentileTranspose = dictPercentileArray[0].map(function (_, colIndex) {\n    return dictPercentileArray.map(function (row) {\n      return row[colIndex];\n    });\n  });\n\n  for (var i = 0; i < dictSheetTranspose.length; i++) {\n    DaysAfterLectMeanSheet1to8.push(calcAverage(dictSheetTranspose[i]));\n    PercentAvgSheet1to8.push(calcAverage(dictPercentileTranspose[i]));\n    Sheet1to8SD.push(getSD(dictSheetTranspose[i]));\n    Percentile1to8SD.push(getSD(dictPercentileTranspose[i]));\n  } // filter out top 50%\n  // progressScores\n\n\n  var bottom50Percent = [];\n  var bottom50marks = [];\n\n  for (var i = 0; i < PercentAvgSheet1to8.length; i++) {\n    if (PercentAvgSheet1to8[i] < 50) {\n      bottom50Percent.push(PercentAvgSheet1to8[i]);\n      bottom50marks.push(progressScores[i]);\n    }\n  } //need to convert into single array of objects\n\n\n  var data = bottom50marks.map(function (x, i) {\n    return {\n      x: x,\n      y: bottom50Percent[i]\n    };\n  });\n} //function to work out week of the year\n\n\nvar weekOfYear = function weekOfYear(date) {\n  var d = new Date(+date);\n  d.setHours(0, 0, 0);\n  d.setDate(d.getDate() + 4 - (d.getDay() || 7));\n  return Math.ceil(((d - new Date(d.getFullYear(), 0, 1)) / 8.64e7 + 1) / 7);\n}; //function to work out the current day of the year\n\n\nDate.prototype.isLeapYear = function () {\n  var year = this.getFullYear();\n  if ((year & 3) != 0) return false;\n  return year % 100 != 0 || year % 400 == 0;\n}; // Get Day of Year\n\n\nDate.prototype.getDOY = function () {\n  var dayCount = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];\n  var mn = this.getMonth();\n  var dn = this.getDate();\n  var dayOfYear = dayCount[mn] + dn;\n  if (mn > 1 && this.isLeapYear()) dayOfYear++;\n  return dayOfYear;\n};\n\nvar dayOfYear = function dayOfYear(date) {\n  return Math.floor((date - new Date(date.getFullYear(), 0, 0)) / 1000 / 60 / 60 / 24);\n};\n\nfunction sortNumber(a, b) {\n  return a - b;\n}\n\nfunction quantile(array, percentile) {\n  array.sort(sortNumber);\n  var index = percentile / 100. * (array.length - 1);\n\n  if (Math.floor(index) == index) {\n    var result = array[index];\n  } else {\n    var i = Math.floor(index);\n    var fraction = index - i;\n    result = array[i] + (array[i + 1] - array[i]) * fraction;\n  }\n\n  return result;\n} // calculate sum\n\n\nfunction sumArr(arr) {\n  var a = arr.slice();\n  return a.reduce(function (a, b) {\n    return parseFloat(a) + parseFloat(b);\n  });\n} //calculate average\n\n\nfunction calcAverage(arr) {\n  var a = arr.slice();\n\n  if (a.length) {\n    var sum = sumArr(a);\n    var avg = sum / a.length;\n    return avg;\n  }\n\n  return false;\n} // Standard deviation\n\n\nfunction getSD(data) {\n  var m = calcAverage(data);\n  return Math.sqrt(data.reduce(function (sq, n) {\n    return sq + Math.pow(n - m, 2);\n  }, 0) / (data.length - 1));\n}\n\n;\n\nvar Bottom = /*#__PURE__*/function (_React$Component) {\n  _inherits(Bottom, _React$Component);\n\n  function Bottom(props) {\n    var _this;\n\n    _classCallCheck(this, Bottom);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Bottom).call(this, props));\n    _this.canvasRef = React.createRef();\n    return _this;\n  }\n\n  _createClass(Bottom, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _ref;\n\n      this.myChart = new Chart(this.canvasRef.current, _defineProperty({\n        type: 'scatter',\n        options: {\n          title: {\n            display: true,\n            text: 'ME2 Fluids 2020 Progress Test: Average % Score per Question',\n            fontSize: 10\n          },\n          legend: {\n            //display: flase, doesn't display legend\n            position: 'right',\n            labels: {\n              fontColor: '#000'\n            }\n          }\n        },\n        data: {\n          datasets: [(_ref = {\n            //input data\n            label: 'Bottom 50% Percentile Standard Deviation of Tutorial Sheets',\n            data: data,\n            trendlineLinear: {\n              style: \"rgb(0 ,0 ,0)\",\n              lineStyle: \"solid\",\n              width: 3\n            },\n            backgroundColor: '#0000cc',\n            borderColor: '#0000cc',\n            borderWidth: 1\n          }, _defineProperty(_ref, \"borderColor\", '#0000cc'), _defineProperty(_ref, \"hoverBorderWidth\", 3), _defineProperty(_ref, \"hoverBorderColor\", '#00'), _defineProperty(_ref, \"fill\", false), _defineProperty(_ref, \"showLine\", false), _ref)]\n        }\n      }, \"options\", {\n        title: {\n          display: true,\n          text: 'Percentile Standard Deviation',\n          fontSize: 25\n        },\n        scales: {\n          xAxes: [{\n            display: true,\n            scaleLabel: {\n              display: true,\n              labelString: 'Progress Test Score Marks(%)'\n            }\n          }],\n          yAxes: [{\n            display: true,\n            scaleLabel: {\n              display: true,\n              labelString: 'Mean Start Time of Sheets after Lecture'\n            }\n          }]\n        },\n        legend: {\n          //display: flase, doesn't display legend\n          position: 'right',\n          display: false,\n          labels: {\n            fontColor: '#000'\n          }\n        },\n        layout: {\n          padding: {\n            left: 50,\n            right: 50,\n            bottom: 0,\n            top: 0\n          }\n        } // tooltips:{ to hide tooltips that show when hovering over graph\n        //     enabled: false\n        // },\n\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"canvas\", {\n        ref: this.canvasRef,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 14\n        }\n      });\n    }\n  }]);\n\n  return Bottom;\n}(React.Component);\n\nexport default Bottom;","map":{"version":3,"sources":["C:/Users/Emman/Documents/ME4/FYP/FinalDash/shards-dashboard-react/src/components/2020Graphs/BottomHalfPercent.js"],"names":["React","Chart","d3","data","csv","then","makeChart","students","progressScores","dictSheet","Sheet5","Sheet4","Sheet3","Sheet2","Sheet1","Sheet8","Sheet7","Sheet6","Sheet12","Sheet11","Sheet10","Sheet9","Sheet17","Sheet16","Sheet15","Sheet14","Sheet13","LectureDate","dictPercentile","P5","P4","P3","P2","P1","P8","P7","P6","P12","P11","P10","P9","P17","P16","P15","P14","P13","PercentAvgSheet1to8","DaysAfterLectMeanSheet1to8","Sheet1to8SD","Percentile1to8SD","i","length","count","LectureCount","progressKey","Object","keys","progressScoremaybe","push","parseFloat","j","key","value","date","Date","DayNumber","dayOfYear","Math","abs","key2","z","dictSheetArray","dictPercentileArray","console","log","dictSheetTranspose","map","_","colIndex","row","dictPercentileTranspose","calcAverage","getSD","bottom50Percent","bottom50marks","x","y","weekOfYear","d","setHours","setDate","getDate","getDay","ceil","getFullYear","prototype","isLeapYear","year","getDOY","dayCount","mn","getMonth","dn","floor","sortNumber","a","b","quantile","array","percentile","sort","index","result","fraction","sumArr","arr","slice","reduce","sum","avg","m","sqrt","sq","n","pow","Bottom","props","canvasRef","createRef","myChart","current","type","options","title","display","text","fontSize","legend","position","labels","fontColor","datasets","label","trendlineLinear","style","lineStyle","width","backgroundColor","borderColor","borderWidth","scales","xAxes","scaleLabel","labelString","yAxes","layout","padding","left","right","bottom","top","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Chart from \"../../utils/chart\";\r\nimport * as d3 from \"d3\";\r\n\r\nvar data = [];\r\nd3.csv(\"https://graphtest123.s3.eu-west-2.amazonaws.com/FMX2_Gradebook_2020_21_03_26_Mobius_Plus_PT_anonymous%2B-AWSupload.csv\") // request csv file\r\n.then(makeChart); // converts into an array then call makeChart() function\r\n\r\n// calls function to make a chart after it has been converted into an array\r\nfunction makeChart(students) { // takes in an array of students\r\n    var progressScores = [];\r\n    var dictSheet = {Sheet5:[] , Sheet4:[] , Sheet3:[] ,Sheet2:[], Sheet1:[], Sheet8:[], Sheet7:[], Sheet6:[], Sheet12:[], Sheet11:[], Sheet10:[], Sheet9:[], Sheet17:[], Sheet16:[], Sheet15:[], Sheet14:[], Sheet13:[]};\r\n    var LectureDate = [28, 21, 14, 7, 0, 49, 42, 35, 77, 70, 63, 56, 112, 105, 98, 91, 84]; //make an array of lecture start dates\r\n    var dictPercentile = {P5:[] , P4:[] , P3:[] ,P2:[], P1:[], P8:[], P7:[], P6:[], P12:[], P11:[], P10:[], P9:[], P17:[], P16:[], P15:[], P14:[], P13:[]};\r\n    var PercentAvgSheet1to8 = [];\r\n    var DaysAfterLectMeanSheet1to8 = [];\r\n    var Sheet1to8SD = [];\r\n    var Percentile1to8SD = [];\r\n    // for loop to check and calculate the days after lecture when students started tutorial sheet\r\n    for (var i =0; i < students.length; i++){\r\n        var count = -1;\r\n        var LectureCount = 0;\r\n        var progressKey = Object.keys(students[i])[97];\r\n        var progressScoremaybe = students[i][progressKey];\r\n        progressScores.push(parseFloat((progressScoremaybe/40)*100));\r\n        for (var j =8; j <= 90; j += 5){\r\n            var key = Object.keys(students[i])[j]; // access title of start times\r\n            var value = students[i][key] // gives date in raw form\r\n                     // console.log(\"Raw form date\" + \" \" + value)\r\n            //convert date string into a time object\r\n            var date = new Date(value);\r\n                    // console.log(\"date\" + \" \" + date)\r\n            var DayNumber = dayOfYear(date);\r\n                    // console.log(\"day number is\" + \" \" + DayNumber)\r\n            //need to account for imperial calendar with 3rd october as week 1\r\n            if (value !== 0){\r\n                count ++;\r\n            } else{\r\n                continue\r\n            }\r\n            if (value === \"\"){\r\n                DayNumber = 154\r\n            }\r\n            else if (dayOfYear(date) >= 286 || dayOfYear(date) < 11){\r\n                DayNumber -= 286;\r\n            } else if (dayOfYear(date) < 46 || dayOfYear(date) >= 11)  {\r\n                DayNumber += 52;\r\n            } else {\r\n                DayNumber += 45\r\n            }\r\n            key = Object.keys(dictSheet)[count]; //accesses tutorial sheet dictionary\r\n            dictSheet[key][i] = Math.abs(DayNumber - LectureDate[LectureCount]);\r\n            LectureCount ++\r\n        }\r\n    };\r\n\r\n    //create percentiles\r\n    for (var i =0; i < Object.keys(dictPercentile).length; i++){\r\n        key = Object.keys(dictPercentile)[i]; //accesses tutorial sheet dictionary\r\n        var key2 = Object.keys(dictSheet)[i]; //accesses tutorial sheet dictionary\r\n        for (var j =0; j <= students.length; j ++){\r\n            count = 0;\r\n            for(var z=0; z <= students.length; z++){\r\n                if (dictSheet[key2][z] >= dictSheet[key2][j]){\r\n                    count ++\r\n                } \r\n            }\r\n            dictPercentile[key][j] = (count/students.length)*100;\r\n        }\r\n    };\r\n\r\n    // working out Mean of sheet time after exam, standard deviation of sheet time after exam, Mean of percentiles, \r\n    for (var i =0; i < Object.keys(dictPercentile).length; i++){\r\n        key = Object.keys(dictPercentile)[i]; //accesses tutorial sheet dictionary\r\n        key2 = Object.keys(dictSheet)[i]; //accesses tutorial sheet dictionary\r\n        for (var j =0; j <= students.length; j ++){\r\n            count = 0;\r\n            for(var z=0; z <= students.length; z++){\r\n                if (dictSheet[key2][z] >= dictSheet[key2][j]){\r\n                    count ++\r\n                } \r\n            }\r\n            dictPercentile[key][j] = (count/students.length)*100;\r\n        }\r\n    };\r\n\r\n    var dictSheetArray = [];\r\n    var dictPercentileArray = [];\r\n    // console.log(Object.values(dictPercentile.P1))\r\n\r\n    // for all sheets use: Object.keys(dictSheet).length instead of 8\r\n    for(var i=0; i < 8; i++){\r\n        dictSheetArray.push(dictSheet[Object.keys(dictSheet)[i]])\r\n        dictPercentileArray.push(dictPercentile[Object.keys(dictPercentile)[i]])\r\n    }\r\n\r\n    console.log(dictSheetArray)\r\n    //Calculating mean of sheets, mean of percentiles, SD of sheets\r\n    var dictSheetTranspose =  dictSheetArray[0].map((_, colIndex) => dictSheetArray.map(row => row[colIndex]));\r\n    var dictPercentileTranspose = dictPercentileArray[0].map((_, colIndex) => dictPercentileArray.map(row => row[colIndex]));\r\n    for(var i=0; i<dictSheetTranspose.length; i++){\r\n        DaysAfterLectMeanSheet1to8.push(calcAverage(dictSheetTranspose[i]))\r\n        PercentAvgSheet1to8.push(calcAverage(dictPercentileTranspose[i]))\r\n        Sheet1to8SD.push(getSD(dictSheetTranspose[i]))\r\n        Percentile1to8SD.push(getSD(dictPercentileTranspose[i]))\r\n    }\r\n\r\n\r\n    // filter out top 50%\r\n    // progressScores\r\n    var bottom50Percent = [];\r\n    var bottom50marks = [];\r\n    for(var i=0; i < PercentAvgSheet1to8.length; i++){\r\n        if(PercentAvgSheet1to8[i] < 50){\r\n            bottom50Percent.push(PercentAvgSheet1to8[i])\r\n            bottom50marks.push(progressScores[i])\r\n        }\r\n    }\r\n\r\n    //need to convert into single array of objects\r\n\r\n    const data = bottom50marks.map((x, i) => {\r\n        return {\r\n            x: x,\r\n            y: bottom50Percent[i]\r\n        };\r\n    });\r\n\r\n}\r\n\r\n\r\n//function to work out week of the year\r\nvar weekOfYear = function(date){\r\nvar d = new Date(+date);\r\nd.setHours(0,0,0);\r\nd.setDate(d.getDate()+4-(d.getDay()||7));\r\nreturn Math.ceil((((d-new Date(d.getFullYear(),0,1))/8.64e7)+1)/7);\r\n};\r\n\r\n//function to work out the current day of the year\r\nDate.prototype.isLeapYear = function() {\r\nvar year = this.getFullYear();\r\nif((year & 3) != 0) return false;\r\nreturn ((year % 100) != 0 || (year % 400) == 0);\r\n};\r\n\r\n// Get Day of Year\r\nDate.prototype.getDOY = function() {\r\nvar dayCount = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];\r\nvar mn = this.getMonth();\r\nvar dn = this.getDate();\r\nvar dayOfYear = dayCount[mn] + dn;\r\nif(mn > 1 && this.isLeapYear()) dayOfYear++;\r\nreturn dayOfYear;\r\n};\r\n\r\nconst dayOfYear = date =>\r\nMath.floor((date - new Date(date.getFullYear(), 0, 0)) / 1000 / 60 / 60 / 24);\r\n\r\n\r\nfunction sortNumber(a,b) {\r\nreturn a - b;\r\n}\r\n\r\nfunction quantile(array, percentile) {\r\n    array.sort(sortNumber);\r\n    var index = percentile/100. * (array.length-1);\r\n    if (Math.floor(index) == index) {\r\n        var result = array[index];\r\n    } else {\r\n        var i = Math.floor(index)\r\n        var fraction = index - i;\r\n        result = array[i] + (array[i+1] - array[i]) * fraction;\r\n    }\r\n    return result;\r\n}\r\n\r\n// calculate sum\r\nfunction sumArr(arr){\r\n    var a = arr.slice();\r\n    return a.reduce(function(a, b) { return parseFloat(a) + parseFloat(b); });\r\n}\r\n\r\n//calculate average\r\nfunction calcAverage(arr){\r\n    var a = arr.slice();\r\n    if (a.length){\r\n        var sum = sumArr(a);\r\n        var avg = sum / a.length;\r\n        return avg;\r\n    }    \r\n    return false;\r\n}\r\n\r\n// Standard deviation\r\nfunction getSD(data) {\r\n    let m = calcAverage(data);\r\n    return Math.sqrt(data.reduce(function (sq, n) {\r\n            return sq + Math.pow(n - m, 2);\r\n        }, 0) / (data.length - 1));\r\n};\r\n\r\nclass Bottom extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.canvasRef = React.createRef();\r\n    }\r\n\r\n    componentDidMount() {\r\n      this.myChart = new Chart(this.canvasRef.current, {\r\n        type: 'scatter',\r\n        options: {\r\n            title: {\r\n                display: true,\r\n                text: 'ME2 Fluids 2020 Progress Test: Average % Score per Question',\r\n                fontSize: 10\r\n            },\r\n            legend: {\r\n                //display: flase, doesn't display legend\r\n                position: 'right',\r\n                labels: {\r\n                    fontColor: '#000'\r\n                }\r\n            },\r\n        },\r\n        data: {    \r\n            datasets: [{ //input data\r\n                label: 'Bottom 50% Percentile Standard Deviation of Tutorial Sheets',\r\n                data: data, \r\n                trendlineLinear: {\r\n                    style: \"rgb(0 ,0 ,0)\",\r\n                    lineStyle: \"solid\",\r\n                    width: 3\r\n                },\r\n                backgroundColor: '#0000cc',\r\n                borderColor: '#0000cc',\r\n                borderWidth: 1,\r\n                borderColor: '#0000cc',\r\n                hoverBorderWidth: 3,\r\n                hoverBorderColor: '#00',\r\n                fill : false,\r\n                showLine: false\r\n            },\r\n        ]\r\n        },\r\n        options: {\r\n            title: {\r\n                display: true,\r\n                text: 'Percentile Standard Deviation',\r\n                fontSize: 25\r\n            },\r\n            scales: {\r\n                xAxes: [{\r\n                    display: true,\r\n                    scaleLabel: {\r\n                        display: true,\r\n                        labelString: 'Progress Test Score Marks(%)'\r\n                    }\r\n                }],\r\n                yAxes: [{\r\n                    display: true,\r\n                    scaleLabel: {\r\n                        display: true,\r\n                        labelString: 'Mean Start Time of Sheets after Lecture'\r\n                    }\r\n                }]\r\n            },\r\n            legend: {\r\n                //display: flase, doesn't display legend\r\n                position: 'right',\r\n                display: false,\r\n                labels: {\r\n                    fontColor: '#000'\r\n                }\r\n            },\r\n            layout: {\r\n                padding: {\r\n                    left: 50,\r\n                    right: 50,\r\n                    bottom: 0,\r\n                    top:0\r\n                }\r\n            },\r\n            // tooltips:{ to hide tooltips that show when hovering over graph\r\n            //     enabled: false\r\n            // },\r\n        }\r\n        \r\n    });\r\n}\r\n  \r\n    render() {\r\n      return <canvas ref={this.canvasRef} />;\r\n    }\r\n  }\r\n\r\n\r\nexport default Bottom;\r\n"]},"metadata":{},"sourceType":"module"}